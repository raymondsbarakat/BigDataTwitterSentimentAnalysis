<html>
  <head>
    <script type='text/javascript' src='https://www.google.com/jsapi'></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>


  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>

    <script type='text/javascript'>
    provinceDict = {
      "Quebec" : 1,
      "Ontario" : 0,
      "Sami" : 5
    }
console.log("FIRST!");
console.log(provinceDict);
    var x = 0;

    // function loadMap() {
      google.load('visualization', '1', {'packages': ['geochart']});
      google.setOnLoadCallback(function() {
        var data = google.visualization.arrayToDataTable([
       ['Province',   'Party'],
       ['Quebec' , 0],
       ['Ontario',0],
       ['Alberta',0],
       ['Manitoba',0],
       ['Nova Scotia', 0],
       ['British Columbia',0],
       ['New Brunswick', 0],
       ['Newfoundland and Labrador', 0],
       ['Nova Scotia',0],
       ['Prince Edward Island',0],
       ['Saskatchewan',0]
         ]);
       var options = {
         region: 'CA',
      //colorAxis: {colors: ['red', 'blue']},
         //displayMode: 'markers',
         resolution: 'provinces',
         legend: 'none',
         enableRegionInteractivity: 'true',
      colorAxis: {
             minValue: 0,
             maxValue: 2
           },
       colors: ['#FF0000','#3498DB'],
           backgroundColor: 'black',
           datalessRegionColor: 'black',
           defaultColor: 'red',

         //sizeAxis: {minSize:5,  maxSize: 5},
         //colorAxis: {minValue: 1, maxValue:1,  colors: ['#B92B3D']}
      };
      var chart = new google.visualization.GeoChart(document.getElementById('chart_div'));
      chart.draw(data, options);

      setInterval(function() {
        $.getJSON('/refreshData', {
        }, function(data2) {
          provinceDict = data2.provinceDict;
        }).done(function() {
            data.setValue(0, 1, provinceDict['Quebec']);
            data.setValue(1, 1, provinceDict['Ontario']);
            data.setValue(2, 1, provinceDict['Alberta']);
            data.setValue(3, 1, provinceDict['Manitoba']);
            data.setValue(4, 1, provinceDict['Nova Scotia']);
            data.setValue(5, 1, provinceDict['British Columbia']);
            data.setValue(6, 1, provinceDict['New Brunswick']);
            data.setValue(7, 1, provinceDict['Newfoundland and Labrador']);
            data.setValue(8, 1, provinceDict['Nova Scotia']);
            data.setValue(9, 1, provinceDict['Prince Edward Island']);
            data.setValue(10, 1, provinceDict['Saskatchewan']);

            chart.draw(data, options);
        });
        }, 3000);
      });

    </script>
  </body>
</html>
